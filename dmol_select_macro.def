#ifdef __DMOL
#ifndef __INDEX
#define __INDEX iselct
#endif
          __FREE(__INDEX)
          isele=__INDX(comlyn, comlen, 'SELE' ,4)
          _MSGBUF (1)=comlyn(isele:comlen)  ! part of string that begins with the selection
          i__=comlen-isele+1
          iend=__INDX(_MSGBUF (1),i__, 'END',3)   ! location of selection termination
          iend=iend-1+isele                              ! index into comlyn starting from 1
          _MSGBUF (1)=comlyn(isele:iend) ! part of string that begins with the selection and ends before ' END'
          word__=pop_string(_MSGBUF (1)) ! remove first word (which we know is 'SELE*') from _MSGBUF
!     process selection:
          __FREE(__INDEX)
          __INDEX=>__GET_IND_FROM_SELECTION(_MSGBUF (1))
!     remove selection string from command line:
          _MSGBUF (1) =comlyn(iend:comlen)  ! command line starting with 'END' (see above) 
          word__=pop_string(_MSGBUF (1) ) ! remove 'END*' e.g. 'ENDING' is ok too
          comlyn(isele:isele)=' ';
          comlyn(isele+1:)=_MSGBUF (1)    ! selection has been removed from command
          comlen=len_trim(comlyn)
!#undef __INDEX
#endif
